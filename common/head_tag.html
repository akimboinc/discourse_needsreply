<!-- NEEDS REPLY -->
<script type="text/discourse-plugin" version="0.8.18">
    // Set the search query
    let search_query = '?max_posts=1';
    // Specify any category slugs that shouldn't have this feature
    let filtered_categories = ["pitches", "weekly-recap", "staff"]


    var needs_reply = api.addNavigationBarItem({
        name: "needsreply",
        displayName:"Needs Reply",
        title: "Needs Reply",
        customFilter: (category, args, router) => { return !category || !filtered_categories.includes(category.slug)}, // exclude categories
        customHref: (category, args, router) => {  return search_query },
        init: (navItem, category) => { if (category) { navItem.set("category", category)  } },
        forceActive: (category, args, router) => {return router.currentURL.includes(search_query);}
    });
</script>
